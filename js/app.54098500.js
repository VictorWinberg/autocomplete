(function(e){function t(t){for(var r,a,s=t[0],i=t[1],u=t[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(f.length)f.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,s=1;s<n.length;s++){var i=n[s];0!==o[i]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},c=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=i;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"27ba":function(e,t,n){},"580f":function(e,t,n){"use strict";var r=n("730b"),o=n.n(r);o.a},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),o=n.n(r);o.a},"6fc3":function(e,t,n){"use strict";var r=n("27ba"),o=n.n(r);o.a},"71a1":function(e,t,n){"use strict";var r=n("edc8"),o=n.n(r);o.a},"730b":function(e,t,n){},"78a7":function(e,t,n){},"9c0c":function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",{staticClass:"text-center my-2"},[e._v("Jayway - Autocomplete")]),n("autocomplete-input"),n("autocomplete-dropdown"),n("div",{staticClass:"flex-grow"}),n("autocomplete-items")],1)},c=[],a=n("5530"),s=n("2f62"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("form",{staticClass:"autocomplete-container autocomplete-form clearfix",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{id:"search",type:"search",name:"search",placeholder:"search..",autocomplete:"off"},domProps:{value:e.search},on:{input:[function(t){t.target.composing||(e.search=t.target.value)},e.onChange]}}),n("button",{attrs:{type:"submit"}},[e._v("Search")])])])},u=[],l=(n("ac1f"),n("841c"),r["a"].extend({name:"AutocompleteInput",data:function(){return{search:this.$store.state.search}},methods:Object(a["a"])(Object(a["a"])({},Object(s["d"])(["updateSearch"])),{},{onSubmit:function(){this.updateSearch(this.search)},onChange:function(){this.updateSearch(this.search)}})})),d=l,f=(n("580f"),n("2877")),p=Object(f["a"])(d,i,u,!1,null,null,null),h=p.exports;function m(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}var v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"autocomplete-container"},[n("ul",{staticClass:"autocomplete-dropdown-menu",class:e.hideDropdown&&"hide"},e._l(e.items,(function(e,t){var r=e.resource,o=m(e,["resource"]),c=o;return n("li",{key:t},[n("autocomplete-card",{attrs:{id:"ac-"+t,resource:r,json:c}})],1)})),0)])])},b=[],g=(n("99af"),n("caad"),n("d81d"),n("13d5"),n("4fad"),n("b64b"),n("d3b7"),n("3ca3"),n("ddb0"),n("96cf"),n("1da1")),j=n("3835"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"autocomplete-card",class:e.hasUrl(e.json.url)?"active":"",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),function(){return e.toggleItem({resource:e.resource,json:e.json})}()}}},[n("div",{staticClass:"absolute-bottom-right"},[n("h1",[e._v(e._s(e.resource))])]),e._l(e.searchQueries,(function(t,r){return n("div",{key:r},[n("b",{staticClass:"text-capitalize"},[e._v(e._s(t.key)+" ")]),n("span",{domProps:{innerHTML:e._s(t.value)}})])}))],2)},O=[];n("4de4"),n("4d63"),n("25f0"),n("466d"),n("5319"),n("a15b"),n("1276");function y(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ")}var _=3,x=15,S=r["a"].extend({name:"AutocompleteCard",props:{resource:{type:String,required:!0},json:{type:Object,required:!0}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(s["e"])(["search"])),Object(s["c"])(["hasUrl"])),{},{searchQueries:function(){var e=this;return Object.entries(this.json).filter((function(e){var t=Object(j["a"])(e,2),n=t[1];return"string"===typeof n})).map((function(t,n){var r=Object(j["a"])(t,2),o=r[0],c=r[1],a=c.match(new RegExp(e.search,"ig"));if(a||!(n>=_)){var s=a||{},i=s.index,u=void 0===i?0:i,l=u-x>0?u-x:0;return{key:y(o),value:c.substr(l,2*x).replace(new RegExp(e.search,"ig"),(function(e){return'<span class="highlight">'.concat(e,"</span>")}))}}})).filter((function(e){return!!e}))}}),methods:Object(s["b"])(["toggleItem"])}),k=S,I=(n("71a1"),Object(f["a"])(k,w,O,!1,null,null,null)),A=I.exports,C=r["a"].extend({name:"AutocompleteDropdown",components:{AutocompleteCard:A},data:function(){return{selected:-1,resources:{films:"Film",people:"Person",planets:"Planet",species:"Species",starships:"Starship",vehicles:"Vehicle"},results:{}}},computed:Object(a["a"])(Object(a["a"])({},Object(s["e"])(["search","hideDropdown"])),{},{items:function(){var e=this;return Object.entries(this.resources).reduce((function(t,n){var r=Object(j["a"])(n,2),o=r[0],c=r[1],s=e.results[o];return s?(s=s.map((function(e){return Object(a["a"])(Object(a["a"])({},e),{},{resource:c})})),t.concat(s)):t}),[])}}),watch:{hideDropdown:function(){this.selected=-1},search:function(e){e?this.searchSWAPI(e):this.results={},this.selected=-1}},created:function(){this.searchSWAPI(this.search),document.addEventListener("keydown",this.handleKeydown,!1)},beforeDestroy:function(){},methods:{searchSWAPI:function(e){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return r=Object.keys(t.resources),n.next=5,Promise.all(r.map((function(n){return t.fetchSWAPI(n,e)})));case 5:if(o=n.sent,e===t.search){n.next=8;break}return n.abrupt("return");case 8:t.results=r.reduce((function(e,t,n){return e[t]=o[n],e}),{});case 9:case"end":return n.stop()}}),n)})))()},fetchSWAPI:function(e,t){return Object(g["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://swapi.dev/api/".concat(e,"/?search=").concat(t));case 2:return r=n.sent,n.next=5,r.json();case 5:return o=n.sent,n.abrupt("return",o.results);case 7:case"end":return n.stop()}}),n)})))()},handleKeydown:function(e){if(["ArrowUp","ArrowDown","Escape"].includes(e.code)){var t=0,n=this.items.length-1;e.preventDefault(),"ArrowUp"===e.code&&this.selected>t?this.selected--:"ArrowDown"===e.code&&this.selected<n?this.selected++:"Escape"===e.code&&document.body.click();var r=document.getElementById("ac-".concat(this.selected));r&&r.focus()}}}}),D=C,P=(n("f8f1"),Object(f["a"])(D,v,b,!1,null,null,null)),E=P.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("ul",e._l(e.items,(function(t){return n("li",{key:t.url,staticClass:"autocomplete-item"},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(){return e.removeItem(t)}}}),e._l(Object.entries(t),(function(t){var r=t[0],o=t[1];return n("div",{key:r},["resource"===r?n("div",{staticClass:"absolute-bottom-right"},[n("h1",[e._v(e._s(o))])]):n("span",[n("b",[e._v(e._s(e.titleCase(r)))]),e._v(" "+e._s(e.formatValue(r,o))+" ")])])}))],2)})),0)])},F=[],L=n("5a0c"),U=n.n(L),$=r["a"].extend({name:"AutocompleteItems",computed:Object(s["e"])(["items"]),methods:Object(a["a"])(Object(a["a"])({},Object(s["b"])(["removeItem"])),{},{titleCase:y,formatValue:function(e,t){return"date"===e?U()(t).format("MMMM D, YYYY h:mm A"):t}})}),N=$,J=(n("6fc3"),Object(f["a"])(N,M,F,!1,null,null,null)),R=J.exports,W=r["a"].extend({name:"App",components:{AutocompleteInput:h,AutocompleteDropdown:E,AutocompleteItems:R},created:function(){window.addEventListener("click",this.handleFocus),document.addEventListener("keyup",this.handleFocus,!1)},beforeDestroy:function(){window.removeEventListener("click",this.handleFocus),document.removeEventListener("keyup",this.handleFocus,!1)},methods:Object(a["a"])(Object(a["a"])({},Object(s["d"])(["hideDropdown"])),{},{handleFocus:function(e){var t=e.target,n=!!t.closest(".autocomplete-container");n?document.body.classList.add("focus"):document.body.classList.remove("focus"),this.hideDropdown(!n)}})}),T=W,Y=(n("5c0b"),Object(f["a"])(T,o,c,!1,null,null,null)),q=Y.exports;n("7db0"),n("c740"),n("a434");r["a"].use(s["a"]);var V=new s["a"].Store({state:{hideDropdown:!0,search:"",items:[]},getters:{hasUrl:function(e){return function(t){return!!e.items.find((function(e){return e.url===t}))}}},mutations:{initialiseStore:function(e){var t=localStorage.getItem("search"),n=localStorage.getItem("items");t&&(e.search=t),n&&(e.items=JSON.parse(n))},updateSearch:function(e,t){e.search=t,localStorage.setItem("search",t)},addItem:function(e,t){e.items.push(t),localStorage.setItem("items",JSON.stringify(e.items))},removeItem:function(e,t){var n=function(e){return e.url===t},r=e.items.findIndex(n);e.items.splice(r,1),localStorage.setItem("items",JSON.stringify(e.items))},hideDropdown:function(e,t){e.hideDropdown=t}},actions:{toggleItem:function(e,t){var n=e.commit,r=e.getters,o=t.resource,c=t.json;if(r.hasUrl(c.url))n("removeItem",c.url);else{var s=Object.entries(c).reduce((function(e,t){var n=Object(j["a"])(t,2),r=n[0],o=n[1];return["created","edited"].includes(r)||"string"!==typeof o||(e[r]=o),e}),{});n("addItem",Object(a["a"])(Object(a["a"])({resource:o},s),{},{date:Date.now()}))}},removeItem:function(e,t){var n=e.commit,r=e.getters;r.hasUrl(t.url)&&n("removeItem",t.url)}}}),B=n("9483");Object(B["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("78a7");r["a"].config.productionTip=!1,new r["a"]({store:V,beforeCreate:function(){this.$store.commit("initialiseStore")},render:function(e){return e(q)}}).$mount("#app")},e64f:function(e,t,n){},edc8:function(e,t,n){},f8f1:function(e,t,n){"use strict";var r=n("e64f"),o=n.n(r);o.a}});
//# sourceMappingURL=app.54098500.js.map