(function(e){function t(t){for(var n,a,s=t[0],i=t[1],u=t[2],f=0,p=[];f<s.length;f++)a=s[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(p.length)p.shift()();return c.push.apply(c,u||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,s=1;s<r.length;s++){var i=r[s];0!==o[i]&&(n=!1)}n&&(c.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},o={app:0},c=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=i;c.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"27ba":function(e,t,r){},"580f":function(e,t,r){"use strict";var n=r("730b"),o=r.n(n);o.a},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),o=r.n(n);o.a},"6fc3":function(e,t,r){"use strict";var n=r("27ba"),o=r.n(n);o.a},"71a1":function(e,t,r){"use strict";var n=r("edc8"),o=r.n(n);o.a},"730b":function(e,t,r){},"78a7":function(e,t,r){},"9c0c":function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("h1",{staticClass:"text-center my-2"},[e._v("Jayway - Autocomplete")]),r("autocomplete-input"),r("autocomplete-dropdown"),r("div",{staticClass:"flex-grow"}),r("autocomplete-items")],1)},c=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("form",{staticClass:"autocomplete-container autocomplete-form clearfix",on:{submit:e.onSubmit}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{id:"search",type:"search",name:"search",placeholder:"search..",autocomplete:"off"},domProps:{value:e.search},on:{input:[function(t){t.target.composing||(e.search=t.target.value)},e.onChange]}}),r("button",{attrs:{type:"submit"}},[e._v("Search")])])])},s=[],i=(r("ac1f"),r("841c"),r("5530")),u=r("2f62"),l=n["a"].extend({name:"AutocompleteInput",data:function(){return{search:this.$store.state.search}},methods:Object(i["a"])(Object(i["a"])({},Object(u["d"])(["updateSearch"])),{},{onSubmit:function(e){this.updateSearch(this.search),e.preventDefault()},onChange:function(){this.updateSearch(this.search)}})}),f=l,p=(r("580f"),r("2877")),d=Object(p["a"])(f,a,s,!1,null,null,null),m=d.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"autocomplete-container"},[r("ul",{staticClass:"autocomplete-dropdown-menu",class:e.hide&&"hide"},[r("li",e._l(Object.entries(e.resources),(function(t){var n=t[0],o=t[1];return r("ul",{key:n},e._l(e.results[n],(function(e,t){return r("li",{key:t},[r("autocomplete-card",{attrs:{resource:o,json:e}})],1)})),0)})),0)])])])},v=[],b=(r("99af"),r("d81d"),r("13d5"),r("b64b"),r("d3b7"),r("3ca3"),r("ddb0"),r("96cf"),r("1da1")),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"autocomplete-card",class:e.hasUrl(e.json.url)?"active":"",on:{click:function(){return e.addItem({resource:e.resource,json:e.json})}}},[r("div",{staticClass:"absolute-bottom-right"},[r("h1",[e._v(e._s(e.resource))])]),e._l(e.searchQueries,(function(t,n){return r("div",{key:n},[r("b",{staticClass:"text-capitalize"},[e._v(e._s(t.key)+" ")]),r("span",{domProps:{innerHTML:e._s(t.value)}})])}))],2)},j=[],O=(r("4de4"),r("4fad"),r("4d63"),r("25f0"),r("466d"),r("5319"),r("3835"));r("a15b"),r("1276");function w(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ")}var y=3,_=15,x=n["a"].extend({name:"AutocompleteCard",props:{resource:{type:String,required:!0},json:{type:Object,required:!0}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(u["e"])(["search"])),Object(u["c"])(["hasUrl"])),{},{searchQueries:function(){var e=this;return Object.entries(this.json).filter((function(e){var t=Object(O["a"])(e,2),r=t[1];return"string"===typeof r})).map((function(t,r){var n=Object(O["a"])(t,2),o=n[0],c=n[1],a=c.match(new RegExp(e.search,"ig"));if(a||!(r>=y)){var s=a||{},i=s.index,u=void 0===i?0:i,l=u-_>0?u-_:0;return{key:w(o),value:c.substr(l,2*_).replace(new RegExp(e.search,"ig"),(function(e){return'<span class="highlight">'.concat(e,"</span>")}))}}})).filter((function(e){return!!e}))}}),methods:Object(u["b"])(["addItem"])}),S=x,k=(r("71a1"),Object(p["a"])(S,g,j,!1,null,null,null)),C=k.exports,I=n["a"].extend({name:"AutocompleteDropdown",components:{AutocompleteCard:C},data:function(){return{hide:!0,resources:{films:"Film",people:"Person",planets:"Planet",species:"Species",starships:"Starship",vehicles:"Vehicle"},results:{}}},computed:Object(u["e"])(["search"]),watch:{search:function(e){e?this.searchSWAPI(e):this.results={}}},created:function(){this.searchSWAPI(this.search),window.addEventListener("click",this.outerClick)},beforeDestroy:function(){window.removeEventListener("click",this.outerClick)},methods:{outerClick:function(e){var t=e.target;t.closest(".autocomplete-container")?(document.body.classList.add("focus"),this.hide=!1):(document.body.classList.remove("focus"),this.hide=!0)},searchSWAPI:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return n=Object.keys(t.resources),r.next=5,Promise.all(n.map((function(r){return t.fetchSWAPI(r,e)})));case 5:if(o=r.sent,e===t.search){r.next=8;break}return r.abrupt("return");case 8:t.results=n.reduce((function(e,t,r){return e[t]=o[r],e}),{});case 9:case"end":return r.stop()}}),r)})))()},fetchSWAPI:function(e,t){return Object(b["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("https://swapi.dev/api/".concat(e,"/?search=").concat(t));case 2:return n=r.sent,r.next=5,n.json();case 5:return o=r.sent,r.abrupt("return",o.results);case 7:case"end":return r.stop()}}),r)})))()}}}),A=I,P=(r("f8f1"),Object(p["a"])(A,h,v,!1,null,null,null)),E=P.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("ul",e._l(e.items,(function(t){return r("li",{key:t.url,staticClass:"autocomplete-item"},[r("a",{staticClass:"close",on:{click:function(){return e.removeItem(t)}}}),e._l(Object.entries(t),(function(t){var n=t[0],o=t[1];return r("div",{key:n},["resource"===n?r("div",{staticClass:"absolute-bottom-right"},[r("h1",[e._v(e._s(o))])]):r("span",[r("b",[e._v(e._s(e.titleCase(n)))]),e._v(" "+e._s(e.formatValue(n,o))+" ")])])}))],2)})),0)])},$=[],D=r("5a0c"),N=r.n(D),R=n["a"].extend({name:"AutocompleteItems",computed:Object(u["e"])(["items"]),methods:Object(i["a"])(Object(i["a"])({},Object(u["b"])(["removeItem"])),{},{titleCase:w,onRemove:function(e){e.preventDefault()},formatValue:function(e,t){return"date"===e?N()(t).format("MMMM D, YYYY h:mm A"):t}})}),J=R,U=(r("6fc3"),Object(p["a"])(J,M,$,!1,null,null,null)),L=U.exports,W=n["a"].extend({name:"App",components:{AutocompleteInput:m,AutocompleteDropdown:E,AutocompleteItems:L}}),T=W,Y=(r("5c0b"),Object(p["a"])(T,o,c,!1,null,null,null)),q=Y.exports;r("7db0"),r("c740"),r("caad"),r("a434");n["a"].use(u["a"]);var F=new u["a"].Store({state:{search:"",items:[]},getters:{hasUrl:function(e){return function(t){return!!e.items.find((function(e){return e.url===t}))}}},mutations:{initialiseStore:function(e){var t=localStorage.getItem("search"),r=localStorage.getItem("items");t&&(e.search=t),r&&(e.items=JSON.parse(r))},updateSearch:function(e,t){e.search=t,localStorage.setItem("search",t)},addItem:function(e,t){e.items.push(t),localStorage.setItem("items",JSON.stringify(e.items))},removeItem:function(e,t){var r=function(e){return e.url===t},n=e.items.findIndex(r);e.items.splice(n,1),localStorage.setItem("items",JSON.stringify(e.items))}},actions:{addItem:function(e,t){var r=e.commit,n=e.getters,o=t.resource,c=t.json;if(!n.hasUrl(c.url)){var a=Object.entries(c).reduce((function(e,t){var r=Object(O["a"])(t,2),n=r[0],o=r[1];return["created","edited"].includes(n)||"string"!==typeof o||(e[n]=o),e}),{});r("addItem",Object(i["a"])(Object(i["a"])({resource:o},a),{},{date:Date.now()}))}},removeItem:function(e,t){var r=e.commit,n=e.getters;n.hasUrl(t.url)&&r("removeItem",t.url)}}}),V=r("9483");Object(V["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});r("78a7");n["a"].config.productionTip=!1,new n["a"]({store:F,beforeCreate:function(){this.$store.commit("initialiseStore")},render:function(e){return e(q)}}).$mount("#app")},e64f:function(e,t,r){},edc8:function(e,t,r){},f8f1:function(e,t,r){"use strict";var n=r("e64f"),o=r.n(n);o.a}});
//# sourceMappingURL=app.df665433.js.map