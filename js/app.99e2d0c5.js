(function(e){function t(t){for(var n,a,s=t[0],i=t[1],u=t[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&f.push(c[a][0]),c[a]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,s=1;s<r.length;s++){var i=r[s];0!==c[i]&&(n=!1)}n&&(o.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},c={app:0},o=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=i;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"27ba":function(e,t,r){},"580f":function(e,t,r){"use strict";var n=r("730b"),c=r.n(n);c.a},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),c=r.n(n);c.a},"6fc3":function(e,t,r){"use strict";var n=r("27ba"),c=r.n(n);c.a},"71a1":function(e,t,r){"use strict";var n=r("edc8"),c=r.n(n);c.a},"730b":function(e,t,r){},"78a7":function(e,t,r){},"9c0c":function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("h1",{staticClass:"text-center my-2"},[e._v("Autocomplete")]),r("autocomplete-input"),r("autocomplete-dropdown"),r("div",{staticClass:"flex-grow"}),r("autocomplete-items")],1)},o=[],a=r("5530"),s=r("2f62"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("form",{staticClass:"autocomplete-container autocomplete-form clearfix",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{id:"search",type:"search",name:"search",placeholder:"search..",autocomplete:"off"},domProps:{value:e.search},on:{input:[function(t){t.target.composing||(e.search=t.target.value)},e.onChange]}}),r("button",{attrs:{type:"submit"}},[e._v("Search")])])])},u=[],l=(r("ac1f"),r("841c"),n["a"].extend({name:"AutocompleteInput",data:function(){return{search:this.$store.state.search}},methods:Object(a["a"])(Object(a["a"])({},Object(s["d"])(["updateSearch"])),{},{onSubmit:function(){this.updateSearch(this.search)},onChange:function(){this.updateSearch(this.search)}})})),d=l,f=(r("580f"),r("2877")),p=Object(f["a"])(d,i,u,!1,null,null,null),m=p.exports;function h(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===t.indexOf(n)&&(r[n]=e[n]);return r}var b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"autocomplete-container"},[r("ul",{staticClass:"autocomplete-dropdown-menu",class:e.hideDropdown&&"hide"},e._l(e.items,(function(e,t){var n=e.resource,c=h(e,["resource"]),o=c;return r("li",{key:t},[r("autocomplete-card",{attrs:{id:"ac-"+t,resource:n,json:o}})],1)})),0)])])},v=[],j=(r("99af"),r("caad"),r("d81d"),r("13d5"),r("4fad"),r("b64b"),r("d3b7"),r("3ca3"),r("ddb0"),r("96cf"),r("1da1")),O=r("3835"),g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"autocomplete-card",class:e.hasUrl(e.json.url)?"active":"",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),function(){return e.toggleItem({resource:e.resource,json:e.json})}()}}},[r("div",{staticClass:"absolute-bottom-right"},[r("h1",[e._v(e._s(e.resource))])]),e._l(e.searchQueries,(function(t,n){return r("div",{key:n},[r("b",{staticClass:"text-capitalize"},[e._v(e._s(t.key)+" ")]),r("span",{domProps:{innerHTML:e._s(t.value)}})])}))],2)},w=[];r("4de4"),r("4d63"),r("25f0"),r("466d"),r("5319"),r("a15b"),r("1276");function y(e){return e.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ")}var _=3,x=15,S=n["a"].extend({name:"AutocompleteCard",props:{resource:{type:String,required:!0},json:{type:Object,required:!0}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(s["e"])(["search"])),Object(s["c"])(["hasUrl"])),{},{searchQueries:function(){var e=this;return Object.entries(this.json).filter((function(e){var t=Object(O["a"])(e,2),r=t[1];return"string"===typeof r})).map((function(t,r){var n=Object(O["a"])(t,2),c=n[0],o=n[1],a=o.match(new RegExp(e.search,"ig"));if(a||!(r>=_)){var s=a||{},i=s.index,u=void 0===i?0:i,l=u-x>0?u-x:0;return{key:y(c),value:o.substr(l,2*x).replace(new RegExp(e.search,"ig"),(function(e){return'<span class="highlight">'.concat(e,"</span>")}))}}})).filter((function(e){return!!e}))}}),methods:Object(s["b"])(["toggleItem"])}),I=S,k=(r("71a1"),Object(f["a"])(I,g,w,!1,null,null,null)),C=k.exports,A=n["a"].extend({name:"AutocompleteDropdown",components:{AutocompleteCard:C},data:function(){return{selected:-1,resources:{films:"Film",people:"Person",planets:"Planet",species:"Species",starships:"Starship",vehicles:"Vehicle"},results:{}}},computed:Object(a["a"])(Object(a["a"])({},Object(s["e"])(["search","hideDropdown"])),{},{items:function(){var e=this;return Object.entries(this.resources).reduce((function(t,r){var n=Object(O["a"])(r,2),c=n[0],o=n[1],s=e.results[c];return s?(s=s.map((function(e){return Object(a["a"])(Object(a["a"])({},e),{},{resource:o})})),t.concat(s)):t}),[])}}),watch:{hideDropdown:function(){this.selected=-1},search:function(e){e?this.searchSWAPI(e):this.results={},this.selected=-1}},created:function(){this.searchSWAPI(this.search),document.addEventListener("keydown",this.handleKeydown,!1)},beforeDestroy:function(){},methods:{searchSWAPI:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return n=Object.keys(t.resources),r.next=5,Promise.all(n.map((function(r){return t.fetchSWAPI(r,e)})));case 5:if(c=r.sent,e===t.search){r.next=8;break}return r.abrupt("return");case 8:t.results=n.reduce((function(e,t,r){return e[t]=c[r],e}),{});case 9:case"end":return r.stop()}}),r)})))()},fetchSWAPI:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,fetch("https://swapi.dev/api/".concat(e,"/?search=").concat(t));case 2:return n=r.sent,r.next=5,n.json();case 5:return c=r.sent,r.abrupt("return",c.results);case 7:case"end":return r.stop()}}),r)})))()},handleKeydown:function(e){if(["ArrowUp","ArrowDown","Escape"].includes(e.code)){var t=0,r=this.items.length-1;e.preventDefault(),"ArrowUp"===e.code&&this.selected>t?this.selected--:"ArrowDown"===e.code&&this.selected<r?this.selected++:"Escape"===e.code&&(document.body.focus(),document.body.click());var n=document.getElementById("ac-".concat(this.selected));n&&n.focus()}}}}),D=A,P=(r("f8f1"),Object(f["a"])(D,b,v,!1,null,null,null)),E=P.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("ul",e._l(e.items,(function(t){return r("li",{key:t.url,staticClass:"autocomplete-item"},[r("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(){return e.removeItem(t)}}}),e._l(Object.entries(t),(function(t){var n=t[0],c=t[1];return r("div",{key:n},["resource"===n?r("div",{staticClass:"absolute-bottom-right"},[r("h1",[e._v(e._s(c))])]):r("span",[r("b",[e._v(e._s(e.titleCase(n)))]),e._v(" "+e._s(e.formatValue(n,c))+" ")])])}))],2)})),0)])},L=[],U=r("5a0c"),$=r.n(U),F=n["a"].extend({name:"AutocompleteItems",computed:Object(s["e"])(["items"]),methods:Object(a["a"])(Object(a["a"])({},Object(s["b"])(["removeItem"])),{},{titleCase:y,formatValue:function(e,t){return"date"===e?$()(t).format("MMMM D, YYYY h:mm A"):t}})}),R=F,J=(r("6fc3"),Object(f["a"])(R,M,L,!1,null,null,null)),W=J.exports,N=n["a"].extend({name:"App",components:{AutocompleteInput:m,AutocompleteDropdown:E,AutocompleteItems:W},created:function(){window.addEventListener("click",this.handleFocus),document.addEventListener("keyup",this.handleFocus,!1)},beforeDestroy:function(){window.removeEventListener("click",this.handleFocus),document.removeEventListener("keyup",this.handleFocus,!1)},methods:Object(a["a"])(Object(a["a"])({},Object(s["d"])(["hideDropdown"])),{},{handleFocus:function(e){var t=e.target,r=!!t.closest(".autocomplete-container");r?document.body.classList.add("focus"):document.body.classList.remove("focus"),this.hideDropdown(!r)}})}),T=N,Y=(r("5c0b"),Object(f["a"])(T,c,o,!1,null,null,null)),V=Y.exports;r("7db0"),r("c740"),r("a434");n["a"].use(s["a"]);var q=new s["a"].Store({state:{hideDropdown:!0,search:"",items:[]},getters:{hasUrl:function(e){return function(t){return!!e.items.find((function(e){return e.url===t}))}}},mutations:{initialiseStore:function(e){var t=localStorage.getItem("search"),r=localStorage.getItem("items");t&&(e.search=t),r&&(e.items=JSON.parse(r))},updateSearch:function(e,t){e.search=t,localStorage.setItem("search",t)},addItem:function(e,t){e.items.push(t),localStorage.setItem("items",JSON.stringify(e.items))},removeItem:function(e,t){var r=function(e){return e.url===t},n=e.items.findIndex(r);e.items.splice(n,1),localStorage.setItem("items",JSON.stringify(e.items))},hideDropdown:function(e,t){e.hideDropdown=t}},actions:{toggleItem:function(e,t){var r=e.commit,n=e.getters,c=t.resource,o=t.json;if(n.hasUrl(o.url))r("removeItem",o.url);else{var s=Object.entries(o).reduce((function(e,t){var r=Object(O["a"])(t,2),n=r[0],c=r[1];return["created","edited"].includes(n)||"string"!==typeof c||(e[n]=c),e}),{});r("addItem",Object(a["a"])(Object(a["a"])({resource:c},s),{},{date:Date.now()}))}},removeItem:function(e,t){var r=e.commit,n=e.getters;n.hasUrl(t.url)&&r("removeItem",t.url)}}});r("78a7");n["a"].config.productionTip=!1,new n["a"]({store:q,beforeCreate:function(){this.$store.commit("initialiseStore")},render:function(e){return e(V)}}).$mount("#app")},e64f:function(e,t,r){},edc8:function(e,t,r){},f8f1:function(e,t,r){"use strict";var n=r("e64f"),c=r.n(n);c.a}});
//# sourceMappingURL=app.99e2d0c5.js.map